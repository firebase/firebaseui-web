{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "email-link-auth-form",
  "type": "registry:block",
  "title": "Email Link Auth Form",
  "description": "A form allowing users to sign in via email link.",
  "dependencies": [
    "@firebase-ui/react"
  ],
  "registryDependencies": [
    "input",
    "button",
    "form",
    "https://fir-ui-shadcn.web.app/policies.json"
  ],
  "files": [
    {
      "path": "src/registry/email-link-auth-form.tsx",
      "content": "\"use client\";\n\nimport type { EmailLinkAuthFormSchema } from \"@firebase-ui/core\";\nimport {\n  useUI,\n  useEmailLinkAuthFormAction,\n  useEmailLinkAuthFormSchema,\n  useEmailLinkAuthFormCompleteSignIn,\n  type EmailLinkAuthFormProps,\n} from \"@firebase-ui/react\";\nimport { useForm } from \"react-hook-form\";\nimport { standardSchemaResolver } from \"@hookform/resolvers/standard-schema\";\nimport { FirebaseUIError, getTranslation } from \"@firebase-ui/core\";\nimport { useState } from \"react\";\n\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Policies } from \"./policies\";\n\nexport type { EmailLinkAuthFormProps };\n\nexport function EmailLinkAuthForm(props: EmailLinkAuthFormProps) {\n  const { onEmailSent, onSignIn } = props;\n  const ui = useUI();\n  const schema = useEmailLinkAuthFormSchema();\n  const action = useEmailLinkAuthFormAction();\n  const [emailSent, setEmailSent] = useState(false);\n\n  const form = useForm<EmailLinkAuthFormSchema>({\n    resolver: standardSchemaResolver(schema),\n    defaultValues: {\n      email: \"\",\n    },\n  });\n\n  useEmailLinkAuthFormCompleteSignIn(onSignIn);\n\n  async function onSubmit(values: EmailLinkAuthFormSchema) {\n    try {\n      await action(values);\n      setEmailSent(true);\n      onEmailSent?.();\n    } catch (error) {\n      const message = error instanceof FirebaseUIError ? error.message : String(error);\n      form.setError(\"root\", { message });\n    }\n  }\n\n  if (emailSent) {\n    return (\n      <div className=\"text-center space-y-4\">\n        <div className=\"text-green-600 dark:text-green-400\">{getTranslation(ui, \"messages\", \"signInLinkSent\")}</div>\n      </div>\n    );\n  }\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-2\">\n        <FormField\n          control={form.control}\n          name=\"email\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>{getTranslation(ui, \"labels\", \"emailAddress\")}</FormLabel>\n              <FormControl>\n                <Input {...field} type=\"email\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <Policies />\n        <Button type=\"submit\" disabled={ui.state !== \"idle\"}>\n          {getTranslation(ui, \"labels\", \"sendSignInLink\")}\n        </Button>\n        {form.formState.errors.root && <FormMessage>{form.formState.errors.root.message}</FormMessage>}\n      </form>\n    </Form>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}