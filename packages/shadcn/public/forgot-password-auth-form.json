{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "forgot-password-auth-form",
  "type": "registry:block",
  "title": "Forgot Password Auth Form",
  "description": "A form allowing users to reset their password via email.",
  "dependencies": [
    "@firebase-oss/ui-react"
  ],
  "registryDependencies": [
    "input",
    "button",
    "form",
    "https://fir-ui-shadcn.web.app/policies.json"
  ],
  "files": [
    {
      "path": "src/registry/forgot-password-auth-form.tsx",
      "content": "\"use client\";\n\nimport type { ForgotPasswordAuthFormSchema } from \"@firebase-oss/ui-core\";\nimport {\n  useForgotPasswordAuthFormAction,\n  useForgotPasswordAuthFormSchema,\n  useUI,\n  type ForgotPasswordAuthFormProps,\n} from \"@firebase-oss/ui-react\";\nimport { useForm } from \"react-hook-form\";\nimport { standardSchemaResolver } from \"@hookform/resolvers/standard-schema\";\nimport { FirebaseUIError, getTranslation } from \"@firebase-oss/ui-core\";\nimport { useState } from \"react\";\n\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Policies } from \"./policies\";\n\nexport type { ForgotPasswordAuthFormProps };\n\nexport function ForgotPasswordAuthForm(props: ForgotPasswordAuthFormProps) {\n  const ui = useUI();\n  const schema = useForgotPasswordAuthFormSchema();\n  const action = useForgotPasswordAuthFormAction();\n  const [emailSent, setEmailSent] = useState(false);\n\n  const form = useForm<ForgotPasswordAuthFormSchema>({\n    resolver: standardSchemaResolver(schema),\n    defaultValues: {\n      email: \"\",\n    },\n  });\n\n  async function onSubmit(values: ForgotPasswordAuthFormSchema) {\n    try {\n      await action(values);\n      setEmailSent(true);\n      props.onPasswordSent?.();\n    } catch (error) {\n      const message = error instanceof FirebaseUIError ? error.message : String(error);\n      form.setError(\"root\", { message });\n    }\n  }\n\n  if (emailSent) {\n    return (\n      <div className=\"text-center space-y-4\">\n        <div className=\"text-green-600 dark:text-green-400\">{getTranslation(ui, \"messages\", \"checkEmailForReset\")}</div>\n      </div>\n    );\n  }\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-2\">\n        <FormField\n          control={form.control}\n          name=\"email\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>{getTranslation(ui, \"labels\", \"emailAddress\")}</FormLabel>\n              <FormControl>\n                <Input {...field} type=\"email\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <Policies />\n        <Button type=\"submit\" disabled={ui.state !== \"idle\"}>\n          {getTranslation(ui, \"labels\", \"resetPassword\")}\n        </Button>\n        {form.formState.errors.root && <FormMessage>{form.formState.errors.root.message}</FormMessage>}\n        {props.onBackToSignInClick ? (\n          <Button type=\"button\" variant=\"secondary\" onClick={props.onBackToSignInClick}>\n            {getTranslation(ui, \"labels\", \"backToSignIn\")}\n          </Button>\n        ) : null}\n      </form>\n    </Form>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}